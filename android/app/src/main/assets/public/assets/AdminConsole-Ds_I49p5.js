import{j as e,m as s,A as t}from"./framer--EiQgGdQ.js";import{r as a}from"./vendor-fbM9bkeS.js";import{c as r,s as i,a as l,R as o,b as n,B as c,d,l as x,L as m,e as h,f as y}from"./index-CGXY-R5d.js";import{D as g}from"./database-CDsHRqV3.js";import"./utils-DiRS1ToC.js";import"./supabase-DkUcngs9.js";import"./ui-Yji1MIDK.js";
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=r("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),p=r("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),u=r("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),j=r("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),f=r("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=()=>{const{totalBooks:t,totalVideos:r,totalUsers:n,totalRevenue:c,loading:d,error:x,refreshStats:m}=function(){const[e,s]=a.useState({totalBooks:0,totalVideos:0,totalUsers:0,totalRevenue:0,loading:!0,error:null});a.useEffect((()=>{t()}),[]);const t=async()=>{try{s((e=>({...e,loading:!0,error:null})));const{count:e,error:t}=await i.from("books").select("*",{count:"exact",head:!0});if(t)throw t;const{count:a,error:r}=await i.from("reels").select("*",{count:"exact",head:!0});if(r)throw r;const{count:l,error:o}=await i.from("profiles").select("*",{count:"exact",head:!0});if(o)throw o;const{data:n,error:c}=await i.from("payments").select("amount").eq("status","completed");if(c)throw c;const d=(null==n?void 0:n.reduce(((e,s)=>e+s.amount),0))||0;s({totalBooks:e||0,totalVideos:a||0,totalUsers:l||0,totalRevenue:d,loading:!1,error:null})}catch(e){console.error("Error fetching admin stats:",e),s((e=>({...e,loading:!1,error:"Failed to fetch statistics"})))}};return{...e,refreshStats:()=>{t()}}}(),h=[{label:"Total Books",value:t.toString(),icon:p,color:"bg-blue-500"},{label:"Total Videos",value:r.toString(),icon:f,color:"bg-green-500"},{label:"Total Users",value:n.toString(),icon:j,color:"bg-purple-500"},{label:"Total Revenue",value:`UGX ${c.toLocaleString()}`,icon:u,color:"bg-yellow-500"}];return x?e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-6 text-center",children:[e.jsx(l,{className:"w-12 h-12 text-red-500 mx-auto mb-2"}),e.jsx("p",{className:"text-red-500 mb-4",children:x}),e.jsxs("button",{onClick:m,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors inline-flex items-center",children:[e.jsx(o,{size:16,className:"mr-2"}),"Try Again"]})]}):e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Dashboard Overview"}),e.jsx("button",{onClick:m,disabled:d,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(o,{size:20,className:"text-gray-500 dark:text-gray-400 "+(d?"animate-spin":"")})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map(((t,a)=>e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},className:"bg-white dark:bg-gray-700 rounded-xl p-6 shadow-md "+(d?"opacity-50":""),children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${t.color}`,children:e.jsx(t.icon,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.label}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:d?"...":t.value})]})]})},t.label)))})]})},{IPFSContentManager:k,QuranPageManager:N}=x(),{VideoUpload:w}=h(),{BookUpload:S}=y(),{VideoList:C}=x(),{BookList:B}=x(),M=({onClose:r})=>{const[i,l]=a.useState("stats"),[o,x]=a.useState(!1),[h,y]=a.useState(!1),p=[{id:"stats",label:"Statistics",icon:b},{id:"videos",label:"Videos",icon:f},{id:"books",label:"Books",icon:c},{id:"quran",label:"Quran Pages",icon:d},{id:"ipfs",label:"IPFS Content",icon:g},{id:"users",label:"Users",icon:j}];return e.jsxs("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:[e.jsxs(s.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-4xl overflow-hidden",children:[e.jsx("div",{className:"bg-primary-500 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{className:"w-6 h-6"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Admin Console"})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:"Close"})]})}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"flex overflow-x-auto",children:p.map((s=>e.jsxs("button",{onClick:()=>l(s.id),className:"flex items-center space-x-2 px-6 py-4 text-sm font-medium transition-colors "+(i===s.id?"text-primary-500 border-b-2 border-primary-500":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:[e.jsx(s.icon,{size:18}),e.jsx("span",{children:s.label})]},s.id)))})}),e.jsx("div",{className:"p-6",children:e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(m,{className:"w-8 h-8 text-primary-500 animate-spin"})}),children:e.jsxs(t,{mode:"wait",children:["stats"===i&&e.jsx(v,{}),"videos"===i&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Video Management"}),e.jsx("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg transition-colors",children:"Upload Video"})]}),e.jsx(C,{})]}),"books"===i&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Book Management"}),e.jsx("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg transition-colors",children:"Add Book"})]}),e.jsx(B,{})]}),"quran"===i&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quran Page Management"}),e.jsx(N,{})]}),"ipfs"===i&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"IPFS Content Management"}),e.jsx(k,{})]}),"users"===i&&e.jsx("div",{children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"User Management"})})]})})})]}),e.jsx(t,{children:o&&e.jsx(w,{onSuccess:()=>{x(!1)},onCancel:()=>x(!1)})}),e.jsx(t,{children:h&&e.jsx(S,{onSuccess:()=>{y(!1)},onCancel:()=>y(!1)})})]})};export{M as AdminConsole};
