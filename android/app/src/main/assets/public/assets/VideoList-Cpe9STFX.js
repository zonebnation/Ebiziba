import{j as e,m as s}from"./framer--EiQgGdQ.js";import{r}from"./vendor-fbM9bkeS.js";import{s as t,L as a,a as i}from"./index-CGXY-R5d.js";import{VideoEditor as l}from"./VideoEditor-CgIlu_Sf.js";import{P as o}from"./pen-DKwZTjy7.js";import{T as d}from"./trash-2-q4_jv6YM.js";import"./utils-DiRS1ToC.js";import"./supabase-DkUcngs9.js";import"./ui-Yji1MIDK.js";import"./upload-lX1edj6g.js";const n=()=>{const[n,c]=r.useState([]),[m,x]=r.useState(!0),[h,p]=r.useState(null),[j,g]=r.useState(null);r.useEffect((()=>{u()}),[]);const u=async()=>{try{x(!0),p(null);const{data:e,error:s}=await t.from("reels").select("*").order("created_at",{ascending:!1});if(s)throw s;c(e||[])}catch(e){console.error("Error fetching videos:",e),p("Failed to load videos")}finally{x(!1)}};return m?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(a,{className:"w-8 h-8 text-primary-500 animate-spin"})}):h?e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-6 text-center",children:[e.jsx(i,{className:"w-12 h-12 text-red-500 mx-auto mb-2"}),e.jsx("p",{className:"text-red-500 mb-4",children:h}),e.jsx("button",{onClick:u,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",children:"Try Again"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[n.map((r=>e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-700 rounded-xl p-4 flex items-center space-x-4",children:[e.jsx("img",{src:r.thumbnail_url,alt:r.title,className:"w-32 h-20 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:r.title}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2",children:r.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[r.likes||0," likes"]}),e.jsxs("span",{children:[r.comments||0," comments"]}),e.jsxs("span",{children:[r.shares||0," shares"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>g(r),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition-colors",children:e.jsx(o,{size:20,className:"text-gray-500 dark:text-gray-400"})}),e.jsx("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this video?"))try{const{error:s}=await t.from("reels").delete().eq("id",e);if(s)throw s;c(n.filter((s=>s.id!==e)))}catch(s){console.error("Error deleting video:",s),alert("Failed to delete video")}})(r.id),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx(d,{size:20,className:"text-red-500"})})]})]},r.id))),0===n.length&&e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"No videos found"})]}),j&&e.jsx(l,{video:j,onSave:e=>{c(n.map((s=>s.id===e.id?e:s))),g(null)},onCancel:()=>g(null)})]})};export{n as VideoList};
